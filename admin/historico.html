<!doctype html>
<html lang="pt-PT">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Histórico de Presenças • Admin • Algazarra</title>
  <link rel="stylesheet" href="../assets/styles.css">
</head>
<body>
  <header class="header">
    <nav class="nav container">
      <div class="marca"><span class="logo"></span> OTL Algazarra</div>
      <div class="actions">
        <a href="painel.html">Painel</a>
        <a href="atividades.html">Atividades</a>
        <a href="criancas.html">Crianças</a>
        <a href="inscricoes.html">Inscrições</a>
        <a href="historico.html" class="ativo">Histórico</a>
        <a href="salas.html">Salas</a>
        <a href="utilizadores.html">Utilizadores</a>
        <a href="#" id="btnSair" class="btn btn-ghost">Sair</a>
      </div>
    </nav>
  </header>

  <main class="container hero">
    <!-- FILTROS -->
    <section class="card">
      <h2>Histórico de Presenças (Geral)</h2>
      <p>Filtre por atividade, monitor e intervalo de datas. Pode exportar ou imprimir o resultado.</p>

      <form id="formFiltros" class="grid grid-4" style="margin-top: 1rem;">
        <div>
          <label for="atividade">Atividade</label>
          <select id="atividade">
            <option value="">Todas</option>
          </select>
        </div>

        <div>
          <label for="monitor">Monitor</label>
          <select id="monitor">
            <option value="">Todos</option>
          </select>
        </div>

        <div>
          <label for="dataDe">De</label>
          <input type="date" id="dataDe">
        </div>

        <div>
          <label for="dataAte">Até</label>
          <input type="date" id="dataAte">
        </div>

        <div class="actions" style="grid-column: span 4;">
          <button class="btn btn-primaria" type="submit">Consultar</button>
          <button class="btn btn-destaque" type="button" onclick="window.print()">Exportar</button>
        </div>
      </form>
    </section>

    <!-- TABELA -->
    <section class="card">
      <h3>Presenças registadas</h3>
      <table class="tabela">
        <thead>
          <tr>
            <th>Data</th>
            <th>Atividade</th>
            <th>Monitor</th>
            <th>Criança</th>
            <th>Presença</th>
            <th>Entrada</th>
            <th>Saída</th>
            <th>Observações</th>
          </tr>
        </thead>
        <tbody id="listaPresencas">
          <tr><td colspan="8" style="text-align:center;">Carregando dados...</td></tr>
        </tbody>
      </table>
    </section>
  </main>

  <footer class="footer">© Algazarra OTL</footer>

  <!-- Scripts -->
  <script src="../scripts/alerta.js"></script>
  <script src="../scripts/db.js"></script>
  <script src="../scripts/sessao.js"></script>
  <script src="../scripts/historico_admin.js"></script>
</body>
</html>
